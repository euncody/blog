
# ğŸ§¼ í´ë¦° ì•„í‚¤í…ì²˜ ì˜ˆì œ - íšŒì›ê°€ì…

## ğŸ“Œ ê°œìš”

ì´ ë¬¸ì„œëŠ” í´ë¦° ì•„í‚¤í…ì²˜(Clean Architecture) ì›ì¹™ì— ë”°ë¼ **íšŒì›ê°€ì… ê¸°ëŠ¥**ì„ êµ¬í˜„í•œ ì˜ˆì œë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.  
ëª©í‘œëŠ” **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ì™¸ë¶€ ê¸°ìˆ (ì›¹, DB ë“±)ì„ ë¶„ë¦¬**í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•œ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤.

---

## ğŸ§± ì•„í‚¤í…ì²˜ êµ¬ì¡°

```
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚     ì™¸ë¶€ ì‹œìŠ¤í…œë“¤     â”‚
           â”‚  (ì›¹, DB, í”„ë ˆì„ì›Œí¬) â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    Interface  â”‚ â† Controller, Adapter
        â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Application    â”‚ â† UseCase / Service
      â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Domain       â”‚ â† Entity, Port
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ìš”êµ¬ì‚¬í•­

- ì´ë¦„, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ì•„ íšŒì›ê°€ì… ì²˜ë¦¬
- ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬
- ë¹„ë°€ë²ˆí˜¸ëŠ” ì•”í˜¸í™”í•˜ì—¬ ì €ì¥

---

## 1. ğŸ§© Domain ê³„ì¸µ

### User.kt

```kotlin
data class User(
    val id: Long? = null,
    val name: String,
    val email: String,
    val password: String // ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
)
```

### UserRepository.kt

```kotlin
interface UserRepository {
    fun save(user: User): User
    fun existsByEmail(email: String): Boolean
}
```

---

## 2. ğŸ§  Application ê³„ì¸µ

### RegisterUserCommand.kt

```kotlin
data class RegisterUserCommand(
    val name: String,
    val email: String,
    val rawPassword: String
)
```

### RegisterUserUseCase.kt

```kotlin
class RegisterUserUseCase(
    private val userRepository: UserRepository,
    private val passwordEncoder: PasswordEncoder
) {
    fun register(command: RegisterUserCommand) {
        if (userRepository.existsByEmail(command.email)) {
            throw IllegalArgumentException("ì´ë©”ì¼ ì¤‘ë³µ")
        }

        val encodedPassword = passwordEncoder.encode(command.rawPassword)
        val user = User(
            name = command.name,
            email = command.email,
            password = encodedPassword
        )
        userRepository.save(user)
    }
}
```

---

## 3. ğŸŒ Interface ê³„ì¸µ

### RegisterUserRequest.kt

```kotlin
data class RegisterUserRequest(
    val name: String,
    val email: String,
    val password: String
)
```

### UserController.kt

```kotlin
@RestController
@RequestMapping("/users")
class UserController(
    private val registerUserUseCase: RegisterUserUseCase
) {
    @PostMapping("/register")
    fun register(@RequestBody request: RegisterUserRequest): ResponseEntity<Void> {
        val command = RegisterUserCommand(
            name = request.name,
            email = request.email,
            rawPassword = request.password
        )
        registerUserUseCase.register(command)
        return ResponseEntity.ok().build()
    }
}
```

---

## 4. ğŸ› ï¸ Framework & Driver ê³„ì¸µ

### JpaUserEntity.kt

```kotlin
@Entity
@Table(name = "users")
class JpaUserEntity(
    @Id @GeneratedValue
    val id: Long? = null,
    val name: String,
    val email: String,
    val password: String
)
```

### JpaUserRepository.kt

```kotlin
interface JpaUserRepository : JpaRepository<JpaUserEntity, Long> {
    fun existsByEmail(email: String): Boolean
}
```

### UserRepositoryAdapter.kt

```kotlin
class UserRepositoryAdapter(
    private val jpaRepo: JpaUserRepository
) : UserRepository {
    override fun save(user: User): User {
        val entity = JpaUserEntity(null, user.name, user.email, user.password)
        val saved = jpaRepo.save(entity)
        return User(saved.id, saved.name, saved.email, saved.password)
    }

    override fun existsByEmail(email: String): Boolean {
        return jpaRepo.existsByEmail(email)
    }
}
```

---

## ğŸ” ì˜ì¡´ íë¦„

```
Controller â†’ UseCase â†’ Repository(interface)  
                 â†‘             â†‘
       Adapterê°€ ì‹¤ì œ êµ¬í˜„ ì—°ê²°
```

---

## âœ… ìš”ì•½

- **ë„ë©”ì¸ ì¤‘ì‹¬ êµ¬ì¡°**ë¡œ í•µì‹¬ ë¡œì§ì€ ì™¸ë¶€ ê¸°ìˆ ë¡œë¶€í„° ë¶„ë¦¬
- í…ŒìŠ¤íŠ¸ ìš©ì´ì„±, ìœ ì§€ë³´ìˆ˜ì„±, í™•ì¥ì„± ì¦ê°€
- ì™¸ë¶€ ê¸°ìˆ (Spring, JPA ë“±)ì€ ì–¸ì œë“  êµì²´ ê°€ëŠ¥

---

## ğŸ“š ì°¸ê³ 

- í´ë¦° ì•„í‚¤í…ì²˜ (Robert C. Martin)
- Hexagonal Architecture / Onion Architecture (ê´€ë ¨ ì•„í‚¤í…ì²˜ ìœ ì‚¬ êµ¬ì¡°)

---
## ğŸ—ï¸ ë©˜í† ë§
- ì˜ì¡´ì„±ë°©í–¥ì´ ì•ˆìª½ìœ¼ë¡œ íë¥´ëŠ” êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ì—¬ ë„ë©”ì¸ ë¡œì§ì´ ì™¸ë¶€ ê¸°ìˆ ì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.