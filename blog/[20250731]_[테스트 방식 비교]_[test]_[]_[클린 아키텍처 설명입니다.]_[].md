# í…ŒìŠ¤íŠ¸ ë°©ì‹ ë¹„êµ

Spring Bootì—ì„œ Controller í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë‘ ê°€ì§€ ë°©ì‹ì— ëŒ€í•œ ë¹„êµì…ë‹ˆë‹¤.

---

## âœ… @SpringBootTest + @AutoConfigureMockMvc

### ğŸ“Œ íŠ¹ì§•
- ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë”©í•©ë‹ˆë‹¤.
- ì‹¤ì œ `Service`, `Repository` ë“±ì´ ëª¨ë‘ ì‹¤í–‰ë©ë‹ˆë‹¤.
- í†µí•© í…ŒìŠ¤íŠ¸ ìˆ˜ì¤€ì—ì„œ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ğŸ§ª ì˜ˆì‹œ
```kotlin
@SpringBootTest
@AutoConfigureMockMvc
class UserControllerTest {

    @Autowired
    lateinit var mockMvc: MockMvc

    @Autowired
    lateinit var userTable: UserTable

    @BeforeEach
    fun setup() {
        userTable.addUser(UserRequest(1L, "í™ê¸¸ë™", 500))
    }

    @Test
    fun `ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•œë‹¤`() {
        mockMvc.get("/users/1")
            .andExpect {
                status { isOk() }
                content { string(containsString("í™ê¸¸ë™")) }
            }
    }
}
```

### âœ… ì¥ì 
- ì‹¤ì œ íë¦„ ê·¸ëŒ€ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- Service, Repositoryê°€ ì‹¤ì œë¡œ ë™ì‘í•¨
- í†µí•© í…ŒìŠ¤íŠ¸ë¡œì„œ ì•ˆì •ì 

### âŒ ë‹¨ì 
- í…ŒìŠ¤íŠ¸ ì†ë„ê°€ ëŠë¦¼
- ì™¸ë¶€ ì—°ë™/í™˜ê²½ ì„¤ì •ê¹Œì§€ ë¡œë”©ë¨

---

## âœ… @WebMvcTest + @MockBean

### ğŸ“Œ íŠ¹ì§•
- Web ê³„ì¸µ(`@Controller`, `@ControllerAdvice`)ë§Œ ë¡œë”©
- `Service`, `Repository`ëŠ” `@MockBean`ìœ¼ë¡œ ëŒ€ì²´
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìˆ˜ì¤€ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë§Œ ê²€ì¦

### ğŸ§ª ì˜ˆì‹œ
```kotlin
@WebMvcTest(UserController::class)
class UserControllerTest {

    @Autowired
    lateinit var mockMvc: MockMvc

    @MockBean
    lateinit var userService: UserService

    @Test
    fun `ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•œë‹¤`() {
        given(userService.getUserInfo(1L))
            .willReturn(UserResponse(1L, "í™ê¸¸ë™", 500))

        mockMvc.get("/users/1")
            .andExpect {
                status { isOk() }
                content { string(containsString("í™ê¸¸ë™")) }
            }
    }
}
```

### âœ… ì¥ì 
- í…ŒìŠ¤íŠ¸ ì†ë„ê°€ ë¹ ë¦„
- ì»¨íŠ¸ë¡¤ëŸ¬ ë ˆì´ì–´ì— ì§‘ì¤‘ ê°€ëŠ¥
- ì˜ì¡´ì„±ì€ ëª¨ë‘ Mock ì²˜ë¦¬ â†’ ë…ë¦½ì 

### âŒ ë‹¨ì 
- ì‹¤ì œ ì„œë¹„ìŠ¤ ë¡œì§ì€ ë™ì‘í•˜ì§€ ì•ŠìŒ
- ì˜ë„ëœ ì‘ë‹µì„ `given()`ìœ¼ë¡œ ì§ì ‘ ì£¼ì…í•´ì•¼ í•¨

---

## ğŸ§­ ì„ íƒ ê°€ì´ë“œ

| ìƒí™© | ì¶”ì²œ ë°©ì‹ |
|------|-----------|
| ì „ì²´ í”Œë¡œìš°, ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦ | `@SpringBootTest` |
| ì»¨íŠ¸ë¡¤ëŸ¬ì˜ URL, ì‘ë‹µ í˜•ì‹, ìƒíƒœì½”ë“œ ë“± ê²€ì¦ | `@WebMvcTest` |

---

## ğŸ“Œ ê²°ë¡ 

- âœ… `@SpringBootTest` â†’ í†µí•© í…ŒìŠ¤íŠ¸ì— ì í•© (ë¬´ê²ì§€ë§Œ ì‹¤ì œì²˜ëŸ¼)
- âœ… `@WebMvcTest` â†’ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— ì í•© (ë¹ ë¥´ê³  ê°„ë‹¨)

ë‘ ë°©ì‹ì€ **ëª©ì ì— ë”°ë¼ ë³‘í–‰ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì´ìƒì **ì…ë‹ˆë‹¤.
