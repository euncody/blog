# 데이터 정합성 (Data Integrity)

## 정의
데이터 정합성이란, 데이터의 정확성, 일관성, 신뢰성을 보장하는 것을 의미합니다. 데이터가 시스템 내외부에서 손상되거나 왜곡되지 않도록 보호하는 것이 핵심입니다.

---

## 유형

### 1. 엔터티 정합성 (Entity Integrity)
- 기본키(Primary Key)는 NULL이 될 수 없음
- 각 행은 고유해야 함

### 2. 참조 정합성 (Referential Integrity)
- 외래키(Foreign Key)는 참조하는 기본키가 존재해야 함
- 부모 데이터 삭제/수정 시 자식 데이터의 동기화 필요

### 3. 도메인 정합성 (Domain Integrity)
- 컬럼에 저장 가능한 값의 형식, 범위, 제약조건 등을 정의 (예: CHECK, NOT NULL 등)

### 4. 사용자 정합성 (User-defined Integrity)
- 업무 규칙(Business Rule)에 따른 데이터 제약조건 (예: 재고가 음수가 되지 않도록 등)

---

## 확보 방법
- DB 제약조건 사용 (PK, FK, UNIQUE, CHECK 등)
- 트리거/스토어드 프로시저로 정합성 검사
- 트랜잭션을 활용하여 데이터 일관성 유지
- 애플리케이션 레벨에서의 유효성 검증

---

## 데이터 정합성 예시
| 조건             | 예시                              |
|------------------|-----------------------------------|
| 기본키 제약조건  | 사용자 ID는 중복되면 안 됨        |
| 외래키 제약조건  | 주문 테이블의 상품ID는 존재해야 함 |
| 도메인 제약조건  | 나이는 0보다 커야 함              |
| 사용자 제약조건  | 포인트는 음수가 될 수 없음        |

