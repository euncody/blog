# 유즈케이스 명세서

## ✅ 1. 잔액 충전 / 조회 API

### 🎯 Use Case: 잔액 충전
- **Actor**: 회원
- **사전 조건**: 로그인되어 있어야 함
- **기본 흐름**:
  1. 사용자가 충전 금액을 입력함
  2. 시스템은 사용자의 기존 잔액을 조회함
  3. 0보다 큰 금액인 경우, 기존 잔액에 충전 금액을 더함
  4. 충전된 잔액을 저장 및 반환함
- **예외 흐름**:
  - 충전 금액이 0 이하인 경우 → 에러 응답 반환

### 🎯 Use Case: 잔액 조회
- **Actor**: 회원
- **기본 흐름**:
  1. 사용자가 잔액 조회 요청
  2. 시스템은 사용자 식별자를 통해 잔액 정보를 반환함

### 🎯 Use Case: 비회원이 잔액 관련 요청
- **Actor**: 비회원
- **기본 흐름**:
  - 회원가입 안내 메시지를 반환함

---

## ✅ 2. 기본 상품 조회 API

### 🎯 Use Case: 상품 목록 조회
- **Actor**: 회원, 비회원
- **기본 흐름**:
  1. 사용자가 상품 목록 조회 요청
  2. 시스템은 상품 ID, 이름, 가격, 잔여수량을 포함하여 반환
  3. 상위 5개 인기 상품을 가장 먼저 노출함

### 🎯 Use Case: 상품 상세 조회
- **Actor**: 회원, 비회원
- **기본 흐름**:
  1. 상품의 잔여 수량을 포함하여 상세 정보 확인 가능

### 🎯 Use Case: 장바구니 담기
- **Actor**: 회원
  - 장바구니에 상품을 담을 수 있음
- **Actor**: 비회원
  - 로그인 요구 응답 반환

### 🎯 Use Case: 즉시 구매
- **Actor**: 회원
  - 바로 구매 가능
- **Actor**: 비회원
  - 불가능 응답 반환

---

## ✅ 3. 선착순 쿠폰 기능

### 🎯 Use Case: 쿠폰 발급
- **Actor**: 회원
- **기본 흐름**:
  1. 사용자가 선착순 쿠폰 요청
  2. 시스템은 재고가 있는 경우 쿠폰을 발급
  3. 발급 성공 시 보유 쿠폰 목록에 추가
- **예외 흐름**:
  - 쿠폰 소진 시 → 발급 실패

### 🎯 Use Case: 보유 쿠폰 목록 조회
- **Actor**: 회원
- **기본 흐름**:
  1. 사용자가 보유 쿠폰 목록 조회
  2. 시스템은 보유 중인 쿠폰들을 반환

### 🎯 Use Case: 선착순 쿠폰 알림
- **Actor**: 회원 → 알림 제공됨  
- **Actor**: 비회원 → 알림 미제공

---

## ✅ 4. 주문 / 결제

### 🎯 Use Case: 상품 주문 및 결제
- **Actor**: 회원
- **기본 흐름**:
  1. 사용자 식별자, 상품 ID, 수량을 입력
  2. 잔액 및 재고 확인
  3. (선택) 쿠폰 선택 → 전체 금액에서 쿠폰 금액 차감
  4. 결제 금액이 잔액보다 작거나 같으면 결제 진행
  5. 결제 성공 시:
     - 잔액 차감
     - 재고 차감
     - 인기 상품 +1 집계
     - 외부 데이터 플랫폼에 주문 정보 전송
     - 주문 완료 정보 반환
- **예외 흐름**:
  - 잔액 부족 시 → 결제 실패
  - 재고 부족 시 → 결제 실패

### 🎯 Use Case: 비회원 주문
- **Actor**: 비회원
- **기본 흐름**: 구매 불가 응답 반환

---

## ✅ 5. 상위 인기 상품 조회

### 🎯 Use Case: 인기 상품 조회
- **Actor**: 회원, 비회원
- **기본 흐름**:
  1. 최근 3일간 가장 많이 판매된 상품 기준으로 상위 5개 상품 정렬
  2. 전체 상품 리스트에서 가장 먼저 노출됨

